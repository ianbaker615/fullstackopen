(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t.n(c),a=t(15),r=t.n(a),u=t(6),i=t(3),s=t(4),l=t.n(s),d="/api/persons",h={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},create:function(e){return l.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(d,"/").concat(e))}},j=t(42),b=t(0),f=function(e){var n=e.message;if(null===n)return null;var t=n[0],c=!1===n[1]?"error":"success";return Object(b.jsx)("div",{className:c,children:t})},O=function(e){return Object(b.jsxs)("form",{onSubmit:e.addContact,children:[Object(b.jsxs)("div",{children:["name:"," ",Object(b.jsx)("input",{value:e.newContact,onChange:e.handleContactChange})]}),Object(b.jsxs)("div",{children:["phone number:"," ",Object(b.jsx)("input",{value:e.newPhone,onChange:e.handlePhoneChange})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var n=e.contact,t=(e.contacts,e.handleDelete);return Object(b.jsxs)("li",{children:[n.name," ",n.phone," ",Object(b.jsx)("button",{onClick:t,children:"Delete"})]})},p=function(e){var n=e.contacts,t=e.search,c=e.handleDelete,o=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(b.jsx)("ul",{children:o.map((function(e){return Object(b.jsx)(m,{contact:e,contacts:n,handleDelete:function(){return c(e.id)}},e.id)}))})},v=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),r=Object(i.a)(a,2),s=r[0],l=r[1],d=Object(c.useState)(""),m=Object(i.a)(d,2),v=m[0],x=m[1],C=Object(c.useState)(""),g=Object(i.a)(C,2),w=g[0],S=g[1],k=Object(c.useState)(null),D=Object(i.a)(k,2),y=D[0],P=D[1],A=Object(c.useState)(null),T=Object(i.a)(A,2),E=T[0],I=T[1];Object(c.useEffect)((function(){h.getAll().then((function(e){o(e)}))}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(f,{message:E?[E,!0]:y?[y,!1]:null}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{children:["Search: ",Object(b.jsx)("input",{value:w,onChange:function(e){S(e.target.value)}})]}),Object(b.jsx)("hr",{}),Object(b.jsx)(O,{addContact:function(e){if(e.preventDefault(),t.some((function(e){return e.name===s}))){var n=t.find((function(e){return e.name===s}));if(window.confirm("Contact ".concat(n.name," already in phonebook. Replace old number with new number?"))){var c=n.id,a=Object(u.a)(Object(u.a)({},n),{},{phone:v});h.update(c,a).then((function(e){o(t.map((function(n){return n.id!==c?n:e}))),l(""),x(""),I("Successfully updated ".concat(e.name,"'s number from ").concat(n.phone," to ").concat(e.phone)),setTimeout((function(){I(null)}),5e3)})).catch((function(e){P("Information for ".concat(a.name," has already been deleted from server")),setTimeout((function(){P(null)}),5e3),o(t.filter((function(e){return e.id!==c})))}))}}else{var r={name:s,phone:v,id:Object(j.a)()};h.create(r).then((function(e){o(t.concat(e)),l(""),x(""),I("Added ".concat(e.name," to phonebook")),setTimeout((function(){I(null)}),5e3)}))}},newContact:s,newPhone:v,handleContactChange:function(e){l(e.target.value)},handlePhoneChange:function(e){x(e.target.value)}}),Object(b.jsx)("hr",{}),Object(b.jsx)("h2",{children:"Contacts"}),Object(b.jsx)(p,{contacts:t,search:w,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"? from phonebook?"))&&h.remove(n.id).then((function(){o(t.filter((function(e){return e.id!==n.id})))}))}})]})};t(39);r.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(v,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5b61917b.chunk.js.map